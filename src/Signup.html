<!DOCTYPE html>
<html>
  <head>
    <title>Library Management System</title>
    <link rel="stylesheet" href="Login.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <header>
      <a href="../index.html" class="brand">Library</a>
      <div class="navigation">
        <div class="navi-items">
          <a href="../index.html">Home</a>
        </div>
      </div>
    </header>
    <div class="login">
      <form
        name="registration_form"
        id="registration_form"
        method="post"
        action="#"
        enctype="multipart/form-data"
      >
        <div class="row">
          <div>
            <h1 class="text-center">Sign Up</h1>
            <div class="form-group">
              <label for="email">Email</label>
              <input
                type="text"
                name="email"
                id="email"
                class="form-control"
                placeholder="Enter your email"
              />
            </div>
            <div class="form-group mb-3 mt-3">
              <label for="password">Password</label>
              <input
                type="password"
                name="password"
                id="password"
                class="form-control"
                placeholder="Enter your password"
              />
            </div>
            <button
              type="button"
              id="register"
              name="register"
              class="btn btn-success"
            >
              Register Now
            </button>
          </div>
        </div>
      </form>
    </div>
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js';
      import { getAnalytics } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js';
      import {
        getAuth,
        createUserWithEmailAndPassword,
        signInWithEmailAndPassword,
        signOut,
      } from 'https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js';

      const firebaseConfig = {
        apiKey: 'AIzaSyAuFxM8gZqY5AS1nsB2cejqBViYi3CLXBw',
        authDomain: 'libmanauth.firebaseapp.com',
        projectId: 'libmanauth',
        storageBucket: 'libmanauth.appspot.com',
        messagingSenderId: '286408570951',
        appId: '1:286408570951:web:79ecc24e8f90305cb4d962',
      };
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const auth = getAuth();
      console.log(app);
      document
        .getElementById('register')
        .addEventListener('click', function () {
          var email = document.getElementById('email').value;
          var password = document.getElementById('password').value;
          let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}');
          if (regex.test(email)) {
            createUserWithEmailAndPassword(auth, email, password)
              .then((userCredential) => {
                const user = userCredential.user;
                console.log(user);
                alert('Registration successfully!!');
                window.location.href = 'categories.html';
              })
              .catch((error) => {
                const errorMessage = error.message;
                console.log(errorMessage);
                alert(error);
              });
          } else {
            alert('Invalid Email');
          }
        });
    </script>
  </body>
</html>
